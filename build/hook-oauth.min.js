!function e(n,t,r){function o(a,u){if(!t[a]){if(!n[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var d=t[a]={exports:{}};n[a][0].call(d.exports,function(e){var t=n[a][1][e];return o(t?t:e)},d,d.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,t){"use strict";var r=e("./winchan");Hook.Plugin.OAuth=function(e){this.client=e},Hook.Plugin.OAuth.prototype.popup=function(e,n){var t=this,o=this.client.url("oauth/"+e),i=this.client.url("oauth/relay_frame"),a=500,u=500,c=screen.width/2-a/2,s=screen.height/2-u/2;o+="&"+this.client.serialize({options:n});var d=new Promise(function(n,d){this.client.auth.currentUser&&this.client.auth.currentUser[e+"_id"]?n(this.client.auth.currentUser):r.open({url:o,relay_url:i,window_features:"menubar=0,location=0,resizable=0,scrollbars=0,status=0,dialog=1,width="+a+",height="+u+",top="+s+",left="+c},function(e,r){!e&&r&&(t.client.auth._registerToken(r),n(r)),e&&"unknown closed window"==e&&d("canceled")})}.bind(this));return d},Hook.Plugin.Manager.register("oauth",Hook.Plugin.OAuth)},{"./winchan":2}],2:[function(e,n,t){"use strict";n.exports=function(){function e(e,n,t){e.attachEvent?e.attachEvent("on"+n,t):e.addEventListener&&e.addEventListener(n,t,!1)}function n(e,n,t){e.detachEvent?e.detachEvent("on"+n,t):e.removeEventListener&&e.removeEventListener(n,t,!1)}function t(){var e=-1,n=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){var t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=t.exec(n)&&(e=parseFloat(RegExp.$1))}else if(n.indexOf("Trident")>-1){var t=new RegExp("rv:([0-9]{2,2}[.0-9]{0,})");null!==t.exec(n)&&(e=parseFloat(RegExp.$1))}return e>=8}function r(){try{var e=navigator.userAgent;return-1!=e.indexOf("Fennec/")||-1!=e.indexOf("Firefox/")&&-1!=e.indexOf("Android")}catch(n){}return!1}function o(){return window.JSON&&window.JSON.stringify&&window.JSON.parse&&window.postMessage}function i(e){/^https?:\/\//.test(e)||(e=window.location.href);var n=document.createElement("a");n.href=e;var t={"http:":/:80$/,"https:":/:443$/}[n.protocol],r=t?n.host.replace(t,""):n.host;return n.protocol+"//"+r}function a(){for(var e=(window.location,window.opener.frames),n=e.length-1;n>=0;n--)try{if(e[n].location.protocol===window.location.protocol&&e[n].location.host===window.location.host&&e[n].name===u)return e[n]}catch(t){}}var u="__winchan_relay_frame",c="die",s=t();return o()?{open:function(t,o){function a(){if(f&&document.body.removeChild(f),f=void 0,v&&(v=clearInterval(v)),n(window,"message",d),n(window,"unload",a),p)try{p.close()}catch(e){h.postMessage(c,w)}p=h=void 0}function d(e){if(e.origin===w)try{var n=JSON.parse(e.data);"ready"===n.a?h.postMessage(m,w):"error"===n.a?(a(),o&&(o(n.d),o=null)):"response"===n.a&&(a(),o&&(o(null,n.d),o=null))}catch(t){}}if(!o)throw"missing required callback argument";var l;t.url||(l="missing required 'url' parameter"),t.relay_url||(l="missing required 'relay_url' parameter"),l&&setTimeout(function(){o(l)},0),t.window_name||(t.window_name=null),(!t.window_features||r())&&(t.window_features=void 0);var f,w=i(t.url);if(w!==i(t.relay_url))return setTimeout(function(){o("invalid arguments: origin of url and relay_url must match")},0);var h;s&&(f=document.createElement("iframe"),f.setAttribute("src",t.relay_url),f.style.display="none",f.setAttribute("name",u),document.body.appendChild(f),h=f.contentWindow);var p=window.open(t.url,t.window_name,t.window_features);h||(h=p);var v=setInterval(function(){p&&p.closed&&(a(),o&&(o("unknown closed window"),o=null))},500),m=JSON.stringify({a:"request",d:t.params});return e(window,"unload",a),e(window,"message",d),{close:a,focus:function(){if(p)try{p.focus()}catch(e){}}}},onOpen:function(t){function r(e){e=JSON.stringify(e),s?d.doPost(e,u):d.postMessage(e,u)}function o(e){var i;try{i=JSON.parse(e.data)}catch(a){}i&&"request"===i.a&&(n(window,"message",o),u=e.origin,t&&setTimeout(function(){t(u,i.d,function(e){t=void 0,r({a:"response",d:e})})},0))}function i(e){if(e.data===c)try{window.close()}catch(n){}}var u="*",d=s?a():window.opener;if(!d)throw"can't find relay frame";e(s?d:window,"message",o),e(s?d:window,"message",i);try{r({a:"ready"})}catch(l){e(d,"load",function(e){r({a:"ready"})})}var f=function(){try{n(s?d:window,"message",i)}catch(e){}t&&r({a:"error",d:"client closed window"}),t=void 0;try{window.close()}catch(o){}};return e(window,"unload",f),{detach:function(){n(window,"unload",f)}}}}:{open:function(e,n,t,r){setTimeout(function(){r("unsupported browser")},0)},onOpen:function(e){setTimeout(function(){e("unsupported browser")},0)}}}()},{}]},{},[1]);